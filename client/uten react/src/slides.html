<html>
  <head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <link href="custom.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mb.bgndgallery/1.9.5/jquery.mb.bgndGallery.js"></script>
  </head>
  
  <body>
    <div class="main">
	    <div class="head center">
        <ul>
          <li><a href='#' onclick="loadAlbumView()">Album</a></li>
          <li><a href="#" onclick="loadSlideshowView()">Alle bilder</a></li>	
        </ul>
	    </div>
  
      <div id="content" class="content center">
          <script type="text/javascript">
              var myGallery;
              var images;
         
             const serverUrl = "http://localhost:5000";
         
             (function loadBgndGallery(){
                 
                 this.getAllImages()
                     .then((res) => {this.images = res.images})
                     .then(this.loadGallery());
             });
         
             async function getAllImages()
             {        
                 const response = await fetch (serverUrl+'/api/albums/tur',);
                 const body = await response.json();
                 if(response.status !== 200) throw Error(body.message);
                 return body;  
             }
         
         $(function(){
         
             //Redefining the "zoom" effect
             $.mbBgndGallery.effects.zoom = {
                 enter:{scale:(1+ Math.random()*1.5),opacity:0, z: 100},
                 exit:{scale:(1 + Math.random()*1.5),opacity:0, z:100},
                 enterTiming:"ease-out",
                 exitTiming:"ease-in"
             };
         
             /**
              *
              * Initialize the gallery
              * @type {mbBgndGallery}
              */
             myGallery = new mbBgndGallery({
                 containment:"body",
                 timer:100,
                 effTimer:8000,
                 controls:"#controls",
                 grayScale:false,
                 shuffle:true,
                 preserveWidth:false,
         //                filter: {grayscale: 100},
                 effect:"zoom",
                 images:this.images,
         
                 onStart:function(){},
                 onPause:function(){},
                 onPlay:function(opt){},
                 onChange:function(opt,idx){},
                 onNext:function(opt){},
                 onPrev:function(opt){}
             });
         
         });
         
         </script>
      </div>
    </div>
  </body>
</html>